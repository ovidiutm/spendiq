export type Language = 'en' | 'ro' | 'fr' | 'it' | 'de'

export function normalizeLanguage(raw: string | null | undefined): Language {
  switch (String(raw ?? '').toLowerCase()) {
    case 'ro':
      return 'ro'
    case 'fr':
      return 'fr'
    case 'it':
      return 'it'
    case 'de':
      return 'de'
    default:
      return 'en'
  }
}

type NonPrimaryLanguage = Exclude<Language, 'en' | 'ro'>

type TranslationCatalog = Record<NonPrimaryLanguage, Record<string, string>>

const TRANSLATIONS: TranslationCatalog = {
  fr: {
    'Mode Selection': 'Selection du mode',
    'Anonymous': 'Anonyme',
    'User Account': 'Compte utilisateur',
    'Dashboard': 'Tableau de bord',
    'User Login': 'Connexion utilisateur',
    'Checking session...': 'Verification de session...',
    'Signed in: ': 'Connecte: ',
    'Logout': 'Se deconnecter',
    'Login / Register': 'Connexion / Inscription',
    'Email / Username': 'E-mail / Nom utilisateur',
    'Password': 'Mot de passe',
    'Show password': 'Afficher le mot de passe',
    'Hide password': 'Masquer le mot de passe',
    'Login': 'Connexion',
    'Register': 'Inscription',
    'Loading...': 'Chargement...',
    'Applying selected language...': 'Application de la langue selectionnee...',
    'Continue as Anonymous': 'Continuer en anonyme',
    'Continue with User Account': 'Continuer avec un compte utilisateur',
    'Login Required for Account Mode': 'Connexion requise pour le mode compte',
    'Import Bank Statement': 'Importer un releve bancaire',
    'Building dashboard...': 'Creation du tableau de bord...',
    'Reload View': 'Recharger la vue',
    'Close notification': 'Fermer la notification',
    'Account Statement Details': 'Details du releve de compte',
    'Account Holder': 'Titulaire du compte',
    'Account Number': 'Numero de compte',
    'Account Type': 'Type de compte',
    'Statement Period': 'Periode du releve',
    'Categories': 'Categories',
    'Expenses (debits)': 'Depenses (debits)',
    'Income (credits)': 'Revenus (credits)',
    'All': 'Tout',
    'All categories': 'Toutes les categories',
    'Add/Remove/Edit Category': 'Ajouter/Supprimer/Modifier une categorie',
    'Reset Categories to initial/default name values': 'Reinitialiser les categories aux valeurs par defaut',
    'Legend': 'Legende',
    'No category data for current filters.': 'Aucune donnee de categorie pour les filtres actuels.',
    'Top Merchants': 'Top commercants',
    'Search merchant / type...': 'Rechercher commercant / type...',
    'No merchant data.': 'Aucune donnee commercant.',
    'Balance Overview': 'Apercu du solde',
    'Net difference:': 'Difference nette:',
    'Savings net:': 'Epargne nette:',
    'Add savings account': 'Ajouter un compte epargne',
    'Transactions': 'Transactions',
    'Hover any row to see full transaction details from the PDF.': 'Survolez une ligne pour voir les details complets depuis le PDF.',
    'Filter table...': 'Filtrer le tableau...',
    'All columns': 'Toutes les colonnes',
    'Date': 'Date',
    'Merchant': 'Commercant',
    'Type': 'Type',
    'Category': 'Categorie',
    'Amount': 'Montant',
    'Save category for:': 'Enregistrer la categorie pour:',
    'Merchant + Type': 'Commercant + Type',
    'Single Transaction': 'Transaction unique',
    'Amount Sum': 'Somme des montants',
    'Export CSV (filtered)': 'Exporter CSV (filtre)',
    'Add / Edit category': 'Ajouter / Modifier categorie',
    'New category name...': 'Nouveau nom de categorie...',
    'Add': 'Ajouter',
    'Select a category...': 'Selectionner une categorie...',
    'Rename': 'Renommer',
    'Delete': 'Supprimer',
    'Save': 'Enregistrer',
    'Cancel': 'Annuler',
    'Savings Accounts': 'Comptes epargne',
    'Savings account IBAN': 'IBAN compte epargne',
    'No savings accounts added.': 'Aucun compte epargne ajoute.',
    'In': 'Entrees',
    'Out': 'Sorties',
    'Direction': 'Direction',
    'Expenses': 'Depenses',
    'Income': 'Revenus',
    'Savings': 'Epargne',
    'Expenses Transactions': 'Transactions depenses',
    'Income Transactions': 'Transactions revenus',
    'Savings Net (Configured accounts)': 'Epargne nette (comptes configures)',
    'Savings Flow': 'Flux epargne',
    'Savings In': 'Epargne entree',
    'Savings Out': 'Epargne sortie',
    'Total': 'Total',
    'Unknown error': 'Erreur inconnue',
    'Please login to save account data.': 'Veuillez vous connecter pour enregistrer les donnees du compte.',
    'Authentication failed.': 'Authentification echouee.',
    'Email/Username is required.': 'Email/Nom utilisateur requis.',
    'Password is required.': 'Mot de passe requis.',
    'This Email/Username is already used.': 'Cet email/nom utilisateur est deja utilise.',
    'Password should have at least 8 characters': 'Le mot de passe doit contenir au moins 8 caracteres',
    'Invalid Email/Username or Password.': 'Email/Nom utilisateur ou mot de passe invalide.',
    'Signed out. Running in anonymous local mode.': 'Deconnecte. Mode anonyme local actif.',
    'Signed out from user account.': 'Deconnecte du compte utilisateur.',
    'Logout failed.': 'Deconnexion echouee.',
    'WARNING! You will lose all changes made to transaction categories!\nReset Categories to initial/default values?': 'ATTENTION! Vous perdrez toutes les modifications des categories de transactions!\nReinitialiser les categories aux valeurs par defaut?',
    'Please login to reset categories in account mode.': 'Veuillez vous connecter pour reinitialiser les categories en mode compte.',
    'Categories reset to default values.': 'Categories reinitialisees aux valeurs par defaut.',
    'Reset failed.': 'Reinitialisation echouee.',
    'Reload failed.': 'Rechargement echoue.',
    'Save settings failed.': 'Echec de l enregistrement des parametres.',
    'Failed to load account data.': 'Echec du chargement des donnees du compte.',
    'Please login first to use User Account mode.': 'Veuillez vous connecter d abord pour utiliser le mode compte utilisateur.',
    'Works immediately with no account. Categories and overrides are saved only in this browser/device using local storage.': 'Fonctionne immediatement sans compte. Les categories et surcharges sont sauvegardees localement dans ce navigateur/appareil.',
    'Sign in to store categories and merchant/type overrides per account in the database, synced across sessions.': 'Connectez-vous pour stocker les categories et surcharges commercant/type par compte dans la base, synchronisees entre sessions.',
    'Automatically turn any account statement into an interactive financial dashboard with full control for organizing, filtering, and interpreting transactions, a clear Income vs. Expenses balance, plus configurable savings details.': 'Transformez automatiquement tout releve de compte en tableau de bord financier interactif avec controle complet pour organiser, filtrer et interpreter les transactions, un equilibre clair Revenus vs Depenses, et des details d epargne configurables.',
    'V1.1 - Anonymous mode uses local cache. Signed-in mode stores categories and overrides per account.': 'V1.1 - Le mode anonyme utilise le cache local. Le mode connecte stocke les categories et surcharges par compte.',
    'Upload a statement to see your dashboard.': 'Importez un releve pour voir votre tableau de bord.',
    'No transactions found for this view.': 'Aucune transaction trouvee pour cette vue.',
    'Set category per merchant + type': 'Definir categorie par commercant + type',
    'Set category only for this transaction': 'Definir categorie uniquement pour cette transaction',
    'Merchant + Type: changing one row applies category to all transactions with same Merchant and Type.': 'Commercant + Type: changer une ligne applique la categorie a toutes les transactions avec le meme commercant et type.',
    'Single Transaction: changing one row applies category only to that exact transaction.': 'Transaction unique: changer une ligne applique la categorie uniquement a cette transaction.',
    'Changing one row applies category to all transactions with same Merchant and Type.': 'Changer une ligne applique la categorie a toutes les transactions avec le meme commercant et type.',
    'Changing one row applies category only to that exact transaction.': 'Changer une ligne applique la categorie uniquement a cette transaction.',
    'Full transaction details included': 'Details complets de transaction inclus',
    'Done. Dashboard reloaded successfully.': 'Termine. Tableau de bord recharge avec succes.',
    'Net': 'Net',
  },
  it: {
    'Mode Selection': 'Selezione modalita',
    'Anonymous': 'Anonimo',
    'User Account': 'Account utente',
    'Dashboard': 'Dashboard',
    'User Login': 'Accesso utente',
    'Checking session...': 'Verifica sessione...',
    'Signed in: ': 'Connesso: ',
    'Logout': 'Disconnetti',
    'Login / Register': 'Accesso / Registrazione',
    'Email / Username': 'Email / Nome utente',
    'Password': 'Password',
    'Show password': 'Mostra password',
    'Hide password': 'Nascondi password',
    'Login': 'Accedi',
    'Register': 'Registrati',
    'Loading...': 'Caricamento...',
    'Applying selected language...': 'Applicazione lingua selezionata...',
    'Continue as Anonymous': 'Continua come anonimo',
    'Continue with User Account': 'Continua con account utente',
    'Login Required for Account Mode': 'Accesso richiesto per modalita account',
    'Import Bank Statement': 'Importa estratto conto',
    'Building dashboard...': 'Creazione dashboard...',
    'Reload View': 'Ricarica vista',
    'Close notification': 'Chiudi notifica',
    'Account Statement Details': 'Dettagli estratto conto',
    'Account Holder': 'Intestatario conto',
    'Account Number': 'Numero conto',
    'Account Type': 'Tipo conto',
    'Statement Period': 'Periodo estratto',
    'Categories': 'Categorie',
    'Expenses (debits)': 'Spese (addebiti)',
    'Income (credits)': 'Entrate (accrediti)',
    'All': 'Tutte',
    'All categories': 'Tutte le categorie',
    'Add/Remove/Edit Category': 'Aggiungi/Rimuovi/Modifica categoria',
    'Reset Categories to initial/default name values': 'Ripristina categorie ai valori predefiniti',
    'Legend': 'Legenda',
    'No category data for current filters.': 'Nessun dato categoria per i filtri correnti.',
    'Top Merchants': 'Top esercenti',
    'Search merchant / type...': 'Cerca esercente / tipo...',
    'No merchant data.': 'Nessun dato esercente.',
    'Balance Overview': 'Panoramica bilancio',
    'Net difference:': 'Differenza netta:',
    'Savings net:': 'Risparmio netto:',
    'Add savings account': 'Aggiungi conto risparmio',
    'Transactions': 'Transazioni',
    'Hover any row to see full transaction details from the PDF.': 'Passa il mouse su una riga per vedere tutti i dettagli dal PDF.',
    'Filter table...': 'Filtra tabella...',
    'All columns': 'Tutte le colonne',
    'Date': 'Data',
    'Merchant': 'Esercente',
    'Type': 'Tipo',
    'Category': 'Categoria',
    'Amount': 'Importo',
    'Save category for:': 'Salva categoria per:',
    'Merchant + Type': 'Esercente + Tipo',
    'Single Transaction': 'Transazione singola',
    'Amount Sum': 'Somma importi',
    'Export CSV (filtered)': 'Esporta CSV (filtrato)',
    'Add / Edit category': 'Aggiungi / Modifica categoria',
    'New category name...': 'Nuovo nome categoria...',
    'Add': 'Aggiungi',
    'Select a category...': 'Seleziona una categoria...',
    'Rename': 'Rinomina',
    'Delete': 'Elimina',
    'Save': 'Salva',
    'Cancel': 'Annulla',
    'Savings Accounts': 'Conti risparmio',
    'Savings account IBAN': 'IBAN conto risparmio',
    'No savings accounts added.': 'Nessun conto risparmio aggiunto.',
    'In': 'Entrate',
    'Out': 'Uscite',
    'Direction': 'Direzione',
    'Expenses': 'Spese',
    'Income': 'Entrate',
    'Savings': 'Risparmio',
    'Expenses Transactions': 'Transazioni spese',
    'Income Transactions': 'Transazioni entrate',
    'Savings Net (Configured accounts)': 'Risparmio netto (conti configurati)',
    'Savings Flow': 'Flusso risparmio',
    'Savings In': 'Entrate risparmio',
    'Savings Out': 'Uscite risparmio',
    'Total': 'Totale',
    'Unknown error': 'Errore sconosciuto',
    'Please login to save account data.': 'Accedi per salvare i dati account.',
    'Authentication failed.': 'Autenticazione fallita.',
    'Email/Username is required.': 'Email/Nome utente obbligatorio.',
    'Password is required.': 'Password obbligatoria.',
    'This Email/Username is already used.': 'Questo Email/Nome utente e gia usato.',
    'Password should have at least 8 characters': 'La password deve avere almeno 8 caratteri',
    'Invalid Email/Username or Password.': 'Email/Nome utente o password non validi.',
    'Signed out. Running in anonymous local mode.': 'Disconnesso. Modalita anonima locale attiva.',
    'Signed out from user account.': 'Disconnesso dall account utente.',
    'Logout failed.': 'Disconnessione fallita.',
    'WARNING! You will lose all changes made to transaction categories!\nReset Categories to initial/default values?': 'ATTENZIONE! Perderai tutte le modifiche alle categorie delle transazioni!\nRipristinare le categorie ai valori predefiniti?',
    'Please login to reset categories in account mode.': 'Accedi per ripristinare le categorie in modalita account.',
    'Categories reset to default values.': 'Categorie ripristinate ai valori predefiniti.',
    'Reset failed.': 'Ripristino fallito.',
    'Reload failed.': 'Ricarica fallita.',
    'Save settings failed.': 'Salvataggio impostazioni fallito.',
    'Failed to load account data.': 'Caricamento dati account fallito.',
    'Please login first to use User Account mode.': 'Accedi prima per usare la modalita account utente.',
    'Works immediately with no account. Categories and overrides are saved only in this browser/device using local storage.': 'Funziona subito senza account. Categorie e override sono salvati localmente in questo browser/dispositivo.',
    'Sign in to store categories and merchant/type overrides per account in the database, synced across sessions.': 'Accedi per salvare categorie e override esercente/tipo per account nel database, sincronizzati tra sessioni.',
    'Automatically turn any account statement into an interactive financial dashboard with full control for organizing, filtering, and interpreting transactions, a clear Income vs. Expenses balance, plus configurable savings details.': 'Trasforma automaticamente qualsiasi estratto conto in una dashboard finanziaria interattiva con controllo completo per organizzare, filtrare e interpretare le transazioni, un chiaro bilancio Entrate vs Spese e dettagli risparmio configurabili.',
    'V1.1 - Anonymous mode uses local cache. Signed-in mode stores categories and overrides per account.': 'V1.1 - La modalita anonima usa cache locale. La modalita autenticata salva categorie e override per account.',
    'Upload a statement to see your dashboard.': 'Carica un estratto per vedere la dashboard.',
    'No transactions found for this view.': 'Nessuna transazione trovata per questa vista.',
    'Set category per merchant + type': 'Imposta categoria per esercente + tipo',
    'Set category only for this transaction': 'Imposta categoria solo per questa transazione',
    'Merchant + Type: changing one row applies category to all transactions with same Merchant and Type.': 'Esercente + Tipo: cambiare una riga applica la categoria a tutte le transazioni con stesso esercente e tipo.',
    'Single Transaction: changing one row applies category only to that exact transaction.': 'Transazione singola: cambiare una riga applica la categoria solo a quella transazione.',
    'Changing one row applies category to all transactions with same Merchant and Type.': 'Cambiare una riga applica la categoria a tutte le transazioni con stesso esercente e tipo.',
    'Changing one row applies category only to that exact transaction.': 'Cambiare una riga applica la categoria solo a quella transazione.',
    'Full transaction details included': 'Dettagli completi transazione inclusi',
    'Done. Dashboard reloaded successfully.': 'Fatto. Dashboard ricaricata con successo.',
    'Net': 'Netto',
  },
  de: {
    'Mode Selection': 'Modusauswahl',
    'Anonymous': 'Anonym',
    'User Account': 'Benutzerkonto',
    'Dashboard': 'Dashboard',
    'User Login': 'Benutzeranmeldung',
    'Checking session...': 'Sitzung wird gepruft...',
    'Signed in: ': 'Angemeldet: ',
    'Logout': 'Abmelden',
    'Login / Register': 'Anmelden / Registrieren',
    'Email / Username': 'E-Mail / Benutzername',
    'Password': 'Passwort',
    'Show password': 'Passwort anzeigen',
    'Hide password': 'Passwort ausblenden',
    'Login': 'Anmelden',
    'Register': 'Registrieren',
    'Loading...': 'Laden...',
    'Applying selected language...': 'Ausgewahlte Sprache wird angewendet...',
    'Continue as Anonymous': 'Als Anonym fortfahren',
    'Continue with User Account': 'Mit Benutzerkonto fortfahren',
    'Login Required for Account Mode': 'Anmeldung fur Kontomodus erforderlich',
    'Import Bank Statement': 'Kontoauszug importieren',
    'Building dashboard...': 'Dashboard wird erstellt...',
    'Reload View': 'Ansicht neu laden',
    'Close notification': 'Benachrichtigung schliessen',
    'Account Statement Details': 'Kontoauszugsdetails',
    'Account Holder': 'Kontoinhaber',
    'Account Number': 'Kontonummer',
    'Account Type': 'Kontotyp',
    'Statement Period': 'Auszugszeitraum',
    'Categories': 'Kategorien',
    'Expenses (debits)': 'Ausgaben (Belastungen)',
    'Income (credits)': 'Einnahmen (Gutschriften)',
    'All': 'Alle',
    'All categories': 'Alle Kategorien',
    'Add/Remove/Edit Category': 'Kategorie hinzufugen/entfernen/bearbeiten',
    'Reset Categories to initial/default name values': 'Kategorien auf Standardwerte zurucksetzen',
    'Legend': 'Legende',
    'No category data for current filters.': 'Keine Kategoriedaten fur aktuelle Filter.',
    'Top Merchants': 'Top Handler',
    'Search merchant / type...': 'Handler / Typ suchen...',
    'No merchant data.': 'Keine Handlerdaten.',
    'Balance Overview': 'Saldo-Ubersicht',
    'Net difference:': 'Nettodifferenz:',
    'Savings net:': 'Netto-Ersparnis:',
    'Add savings account': 'Sparkonto hinzufugen',
    'Transactions': 'Transaktionen',
    'Hover any row to see full transaction details from the PDF.': 'Bewege den Mauszeiger uber eine Zeile, um alle Details aus dem PDF zu sehen.',
    'Filter table...': 'Tabelle filtern...',
    'All columns': 'Alle Spalten',
    'Date': 'Datum',
    'Merchant': 'Handler',
    'Type': 'Typ',
    'Category': 'Kategorie',
    'Amount': 'Betrag',
    'Save category for:': 'Kategorie speichern fur:',
    'Merchant + Type': 'Handler + Typ',
    'Single Transaction': 'Einzeltransaktion',
    'Amount Sum': 'Betragssumme',
    'Export CSV (filtered)': 'CSV exportieren (gefiltert)',
    'Add / Edit category': 'Kategorie hinzufugen / bearbeiten',
    'New category name...': 'Neuer Kategoriename...',
    'Add': 'Hinzufugen',
    'Select a category...': 'Kategorie auswahlen...',
    'Rename': 'Umbenennen',
    'Delete': 'Loschen',
    'Save': 'Speichern',
    'Cancel': 'Abbrechen',
    'Savings Accounts': 'Sparkonten',
    'Savings account IBAN': 'IBAN Sparkonto',
    'No savings accounts added.': 'Keine Sparkonten hinzugefugt.',
    'In': 'Eingange',
    'Out': 'Ausgange',
    'Direction': 'Richtung',
    'Expenses': 'Ausgaben',
    'Income': 'Einnahmen',
    'Savings': 'Ersparnisse',
    'Expenses Transactions': 'Ausgaben-Transaktionen',
    'Income Transactions': 'Einnahmen-Transaktionen',
    'Savings Net (Configured accounts)': 'Netto-Ersparnis (konfigurierte Konten)',
    'Savings Flow': 'Sparfluss',
    'Savings In': 'Sparen Eingang',
    'Savings Out': 'Sparen Ausgang',
    'Total': 'Gesamt',
    'Unknown error': 'Unbekannter Fehler',
    'Please login to save account data.': 'Bitte anmelden, um Kontodaten zu speichern.',
    'Authentication failed.': 'Authentifizierung fehlgeschlagen.',
    'Email/Username is required.': 'E-Mail/Benutzername ist erforderlich.',
    'Password is required.': 'Passwort ist erforderlich.',
    'This Email/Username is already used.': 'Diese E-Mail/dieser Benutzername wird bereits verwendet.',
    'Password should have at least 8 characters': 'Das Passwort muss mindestens 8 Zeichen haben',
    'Invalid Email/Username or Password.': 'Ungultige E-Mail/Benutzername oder Passwort.',
    'Signed out. Running in anonymous local mode.': 'Abgemeldet. Anonymer lokaler Modus aktiv.',
    'Signed out from user account.': 'Vom Benutzerkonto abgemeldet.',
    'Logout failed.': 'Abmeldung fehlgeschlagen.',
    'WARNING! You will lose all changes made to transaction categories!\nReset Categories to initial/default values?': 'WARNUNG! Sie verlieren alle Anderungen an Transaktionskategorien!\nKategorien auf Standardwerte zurucksetzen?',
    'Please login to reset categories in account mode.': 'Bitte anmelden, um Kategorien im Kontomodus zuruckzusetzen.',
    'Categories reset to default values.': 'Kategorien auf Standardwerte zuruckgesetzt.',
    'Reset failed.': 'Zurucksetzen fehlgeschlagen.',
    'Reload failed.': 'Neu laden fehlgeschlagen.',
    'Save settings failed.': 'Speichern der Einstellungen fehlgeschlagen.',
    'Failed to load account data.': 'Laden der Kontodaten fehlgeschlagen.',
    'Please login first to use User Account mode.': 'Bitte zuerst anmelden, um den Benutzerkontomodus zu verwenden.',
    'Works immediately with no account. Categories and overrides are saved only in this browser/device using local storage.': 'Funktioniert sofort ohne Konto. Kategorien und Overrides werden nur in diesem Browser/Gerat lokal gespeichert.',
    'Sign in to store categories and merchant/type overrides per account in the database, synced across sessions.': 'Anmelden, um Kategorien und Handler/Typ-Overrides pro Konto in der Datenbank zu speichern, synchronisiert uber Sitzungen.',
    'Automatically turn any account statement into an interactive financial dashboard with full control for organizing, filtering, and interpreting transactions, a clear Income vs. Expenses balance, plus configurable savings details.': 'Wandle jeden Kontoauszug automatisch in ein interaktives Finanz-Dashboard um, mit voller Kontrolle zum Organisieren, Filtern und Interpretieren von Transaktionen, klarer Einnahmen-vs-Ausgaben-Bilanz und konfigurierbaren Spar-Details.',
    'V1.1 - Anonymous mode uses local cache. Signed-in mode stores categories and overrides per account.': 'V1.1 - Der anonyme Modus nutzt lokalen Cache. Der angemeldete Modus speichert Kategorien und Overrides pro Konto.',
    'Upload a statement to see your dashboard.': 'Laden Sie einen Auszug hoch, um Ihr Dashboard zu sehen.',
    'No transactions found for this view.': 'Keine Transaktionen fur diese Ansicht gefunden.',
    'Set category per merchant + type': 'Kategorie pro Handler + Typ festlegen',
    'Set category only for this transaction': 'Kategorie nur fur diese Transaktion festlegen',
    'Merchant + Type: changing one row applies category to all transactions with same Merchant and Type.': 'Handler + Typ: Das Andern einer Zeile setzt die Kategorie fur alle Transaktionen mit gleichem Handler und Typ.',
    'Single Transaction: changing one row applies category only to that exact transaction.': 'Einzeltransaktion: Das Andern einer Zeile setzt die Kategorie nur fur diese Transaktion.',
    'Changing one row applies category to all transactions with same Merchant and Type.': 'Das Andern einer Zeile setzt die Kategorie fur alle Transaktionen mit gleichem Handler und Typ.',
    'Changing one row applies category only to that exact transaction.': 'Das Andern einer Zeile setzt die Kategorie nur fur diese Transaktion.',
    'Full transaction details included': 'Vollstandige Transaktionsdetails enthalten',
    'Done. Dashboard reloaded successfully.': 'Fertig. Dashboard erfolgreich neu geladen.',
    'Net': 'Netto',
  },
}

function translateDynamic(language: NonPrimaryLanguage, en: string): string | null {
  if (language === 'fr') {
    const userAccount = /^User Account \((.+)\)$/.exec(en)
    if (userAccount) return `Compte utilisateur (${userAccount[1]})`

    const doneProcessed = /^Done\. "(.+)" processed in ([0-9]+(?:\.[0-9]+)?)s \(([0-9]+) transactions\)\.$/.exec(en)
    if (doneProcessed) return `Termine. "${doneProcessed[1]}" traite en ${doneProcessed[2]}s (${doneProcessed[3]} transactions).`
  }

  if (language === 'it') {
    const userAccount = /^User Account \((.+)\)$/.exec(en)
    if (userAccount) return `Account utente (${userAccount[1]})`

    const doneProcessed = /^Done\. "(.+)" processed in ([0-9]+(?:\.[0-9]+)?)s \(([0-9]+) transactions\)\.$/.exec(en)
    if (doneProcessed) return `Fatto. "${doneProcessed[1]}" elaborato in ${doneProcessed[2]}s (${doneProcessed[3]} transazioni).`
  }

  if (language === 'de') {
    const userAccount = /^User Account \((.+)\)$/.exec(en)
    if (userAccount) return `Benutzerkonto (${userAccount[1]})`

    const doneProcessed = /^Done\. "(.+)" processed in ([0-9]+(?:\.[0-9]+)?)s \(([0-9]+) transactions\)\.$/.exec(en)
    if (doneProcessed) return `Fertig. "${doneProcessed[1]}" in ${doneProcessed[2]}s verarbeitet (${doneProcessed[3]} Transaktionen).`
  }

  return null
}

export function translate(language: Language, ro: string, en: string): string {
  if (language === 'ro') return ro
  if (language === 'en') return en

  const staticHit = TRANSLATIONS[language][en]
  if (staticHit) return staticHit

  const dynamicHit = translateDynamic(language, en)
  if (dynamicHit) return dynamicHit

  // Hard fallback to keep UI readable if a future string is not cataloged yet.
  return en
}

export const LANGUAGE_OPTIONS: Array<{ value: Language; label: string }> = [
  { value: 'en', label: 'English' },
  { value: 'ro', label: 'Romana' },
  { value: 'fr', label: 'Francais' },
  { value: 'it', label: 'Italiano' },
  { value: 'de', label: 'Deutsch' },
]